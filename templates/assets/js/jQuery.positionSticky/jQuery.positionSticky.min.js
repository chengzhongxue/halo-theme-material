!function(t,e){!function(){for(var t=0,i=["ms","moz","webkit","o"],n=0;n<i.length&&!e.requestAnimationFrame;++n)e.requestAnimationFrame=e[i[n]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[i[n]+"CancelAnimationFrame"]||e[i[n]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(i){var n=(new Date).getTime(),o=Math.max(0,16-(n-t)),s=e.setTimeout(function(){i(n+o)},o);return t=n+o,s}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(t){clearTimeout(t)})}();var i={POS_SCHEME_STATIC:100,POS_SCHEME_FIXED:200,POS_SCHEME_ABSOLUTE:300,create:function(t,e){return"undefined"==typeof e&&(e={}),Object.create(i).init(t,e)},init:function(t,n){return this.constructor=i,this.window=e,this.element=t,this.container=t.parentNode,this.posScheme=i.POS_SCHEME_STATIC,this.isTicking=!1,this.threshold=null,this.options=n,this.boundingBoxHeight=null,this.latestKnownScrollY=this.window.pageYOffset,this.validateContainerPosScheme(),this.setOffsetTop(),this.setOffsetBottom(),this.calcThreshold(),this.setElementWidth(),this.setBoundingBoxHeight(),this.createPlaceholder(),this.subscribeToWindowScroll(),this},validateContainerPosScheme:function(){var t=this.container.style.position;"relative"!=t&&"absolute"!=t&&(this.container.style.position="relative")},setOffsetTop:function(){if("number"==typeof this.options.offsetTop&&this.options.offsetTop>=0)this.offsetTop=this.options.offsetTop;else{var t=parseInt(this.window.getComputedStyle(this.container).borderTopWidth,10),e=parseInt(this.window.getComputedStyle(this.container).paddingTop,10);this.offsetTop=t+e}},setOffsetBottom:function(){var t=parseInt(this.window.getComputedStyle(this.container).borderBottomWidth,10),e=parseInt(this.window.getComputedStyle(this.container).paddingBottom,10);this.offsetBottom=t+e},calcThreshold:function(){this.threshold=this.getElementDistanceFromDocumentTop()-this.offsetTop},setElementWidth:function(){var t=this.window.getComputedStyle(this.element).width;this.element.style.width=t},setBoundingBoxHeight:function(t){this.boundingBoxHeight=this.element.getBoundingClientRect().height,t===!0&&(this.placeholder.style.height=this.boundingBoxHeight+"px")},createPlaceholder:function(){var t=document.createElement("DIV"),e=this.element.getBoundingClientRect().width+"px",i=this.boundingBoxHeight+"px",n=this.window.getComputedStyle(this.element).margin,o=this.window.getComputedStyle(this.element).float;t.style.display="none",t.style.width=e,t.style.height=i,t.style.margin=n,t.style.float=o,this.container.insertBefore(t,this.element),this.placeholder=t},subscribeToWindowScroll:function(){this.window.addEventListener("scroll",this.onScroll.bind(this))},onScroll:function(){this.isTicking||(this.latestKnownScrollY=this.window.pageYOffset,this.window.requestAnimationFrame(this.update.bind(this)),this.isTicking=!0)},isStatic:function(){return this.posScheme===i.POS_SCHEME_STATIC},makeStatic:function(){this.element.style.position="static",this.placeholder.style.display="none",this.posScheme=i.POS_SCHEME_STATIC},isFixed:function(){return this.posScheme===i.POS_SCHEME_FIXED},makeFixed:function(){this.element.style.bottom=null,this.element.style.position="fixed",this.element.style.top=this.offsetTop+"px",this.placeholder.style.display="block",this.posScheme=i.POS_SCHEME_FIXED},isAbsolute:function(){return this.posScheme===i.POS_SCHEME_ABSOLUTE},makeAbsolute:function(){this.element.style.top=null,this.element.style.position="absolute",this.element.style.bottom=this.offsetBottom+"px",this.placeholder.style.display="block",this.posScheme=i.POS_SCHEME_ABSOLUTE},update:function(){this.isTicking=!1,this.isBelowThreshold()?this.isStatic()||this.makeStatic():this.canStickyFitInContainer()?this.isFixed()||this.makeFixed():this.isAbsolute()||this.makeAbsolute()},isBelowThreshold:function(){return this.latestKnownScrollY<this.threshold?!0:!1},canStickyFitInContainer:function(){return this.getAvailableSpaceInContainer()>=this.boundingBoxHeight},getAvailableSpaceInContainer:function(){return this.container.getBoundingClientRect().bottom-this.offsetBottom-this.offsetTop},getElementDistanceFromDocumentTop:function(){var t=this.isStatic()?this.element:this.placeholder,e=this.latestKnownScrollY+t.getBoundingClientRect().top;return e},refresh:function(){this.calcThreshold(),this.setBoundingBoxHeight(!0)}};t.fn.positionSticky=function(e){return this.each(function(){var n=t(this),o=n.data("positionSticky");o||n.data("positionSticky",o=i.create(this,e)),"string"==typeof e&&o[e]()})}}(jQuery,window);